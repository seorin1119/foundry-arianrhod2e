{{!-- Abilities Tab --}}
<section class="tab abilities{{#if tabs.abilities.active}} active{{/if}}" data-group="primary" data-tab="abilities">

  {{!-- Ability Scores --}}
  <section class="abilities-grid">
    <h3>{{localize "ARIANRHOD.Abilities"}}</h3>
    <div class="ability-list">
      {{#each abilities as |ability key|}}
      <div class="ability flexrow">
        <span class="ability-label" data-action="rollAbility" data-ability="{{key}}"
              title="{{ability.label}} チェック (クリックでロール)">
          {{ability.abbr}}
        </span>
        <button type="button" data-action="decreaseAbility" data-ability="{{key}}"
                title="{{localize 'ARIANRHOD.DecreaseAbility'}}" style="width: 20px; padding: 1px; font-size: 0.9em;">-</button>
        <input class="ability-value" type="number"
               name="system.abilities.{{key}}.value"
               value="{{ability.value}}" data-dtype="Number" />
        <button type="button" data-action="increaseAbility" data-ability="{{key}}"
                title="{{localize 'ARIANRHOD.IncreaseAbility'}}" style="width: 20px; padding: 1px; font-size: 0.9em;">+</button>
        {{#if ability.mod}}
        <span class="ability-modifier">+{{ability.mod}}</span>
        <span class="ability-total">={{ability.total}}</span>
        {{/if}}
        <span class="ability-bonus">[{{ability.bonus}}]</span>
      </div>
      {{/each}}
    </div>
  </section>

  {{!-- Combat Stats --}}
  <section class="combat-stats">
    <h3>{{localize "ARIANRHOD.CombatStats"}}</h3>
    <div class="combat-grid">
      <div class="resource hp flexrow">
        <label>{{localize "ARIANRHOD.HP"}}</label>
        <div class="resource-values">
          <input type="number" name="system.combat.hp.value"
                 value="{{system.combat.hp.value}}" data-dtype="Number" />
          <span>/</span>
          <input type="number" name="system.combat.hp.max"
                 value="{{system.combat.hp.max}}" data-dtype="Number" />
        </div>
      </div>
      <div class="resource mp flexrow">
        <label>{{localize "ARIANRHOD.MP"}}</label>
        <div class="resource-values">
          <input type="number" name="system.combat.mp.value"
                 value="{{system.combat.mp.value}}" data-dtype="Number" />
          <span>/</span>
          <input type="number" name="system.combat.mp.max"
                 value="{{system.combat.mp.max}}" data-dtype="Number" />
        </div>
      </div>
      <div class="resource fate flexrow">
        <label>{{localize "ARIANRHOD.Fate"}}</label>
        <div class="resource-values">
          <input type="number" name="system.fate.value"
                 value="{{system.fate.value}}" data-dtype="Number" />
          <span>/</span>
          <input type="number" name="system.fate.max"
                 value="{{system.fate.max}}" data-dtype="Number" />
        </div>
      </div>
      <div class="combat-detail flexrow">
        <label>{{localize "ARIANRHOD.PhysDef"}}</label>
        <input type="number" name="system.combat.physDef"
               value="{{system.combat.physDef}}" data-dtype="Number" />
      </div>
      <div class="combat-detail flexrow">
        <label>{{localize "ARIANRHOD.MagDef"}}</label>
        <input type="number" name="system.combat.magDef"
               value="{{system.combat.magDef}}" data-dtype="Number" />
      </div>
      <div class="combat-detail flexrow">
        <label>{{localize "ARIANRHOD.Initiative"}}</label>
        <input type="number" name="system.combat.initiative"
               value="{{system.combat.initiative}}" data-dtype="Number" />
      </div>
      <div class="combat-detail flexrow">
        <label>{{localize "ARIANRHOD.Movement"}}</label>
        <input type="number" name="system.combat.movement"
               value="{{system.combat.movement}}" data-dtype="Number" />
      </div>
      <div class="combat-detail flexrow">
        <label>{{localize "ARIANRHOD.Accuracy"}}</label>
        <input type="number" name="system.combat.accuracy"
               value="{{system.combat.accuracy}}" data-dtype="Number" />
      </div>
      <div class="combat-detail flexrow">
        <label>{{localize "ARIANRHOD.Evasion"}}</label>
        <input type="number" name="system.combat.evasion"
               value="{{system.combat.evasion}}" data-dtype="Number" />
      </div>
      <div class="combat-detail flexrow">
        <label>{{localize "ARIANRHOD.Attack"}}</label>
        <input type="number" name="system.combat.attack"
               value="{{system.combat.attack}}" data-dtype="Number" />
      </div>
      <div class="combat-detail flexrow">
        <label>{{localize "ARIANRHOD.MagAttack"}}</label>
        <input type="number" name="system.combat.magAttack"
               value="{{system.combat.magAttack}}" data-dtype="Number" />
      </div>
    </div>
  </section>

  {{!-- Special Checks --}}
  <section class="special-checks">
    <h3>{{localize "ARIANRHOD.SpecialChecks"}}</h3>
    <div class="special-checks-grid">
      <div class="combat-detail flexrow">
        <label>{{localize "ARIANRHOD.CheckAlchemy"}}</label>
        <input type="number" name="system.specialChecks.alchemy"
               value="{{system.specialChecks.alchemy}}" data-dtype="Number" />
      </div>
      <div class="combat-detail flexrow">
        <label>{{localize "ARIANRHOD.CheckTrapDisarm"}}</label>
        <input type="number" name="system.specialChecks.trapDisarm"
               value="{{system.specialChecks.trapDisarm}}" data-dtype="Number" />
      </div>
      <div class="combat-detail flexrow">
        <label>{{localize "ARIANRHOD.CheckTrapDetect"}}</label>
        <input type="number" name="system.specialChecks.trapDetect"
               value="{{system.specialChecks.trapDetect}}" data-dtype="Number" />
      </div>
      <div class="combat-detail flexrow">
        <label>{{localize "ARIANRHOD.CheckDangerSense"}}</label>
        <input type="number" name="system.specialChecks.dangerSense"
               value="{{system.specialChecks.dangerSense}}" data-dtype="Number" />
      </div>
      <div class="combat-detail flexrow">
        <label>{{localize "ARIANRHOD.CheckMagic"}}</label>
        <input type="number" name="system.specialChecks.magicCheck"
               value="{{system.specialChecks.magicCheck}}" data-dtype="Number" />
      </div>
      <div class="combat-detail flexrow">
        <label>{{localize "ARIANRHOD.CheckEnemyIdentify"}}</label>
        <input type="number" name="system.specialChecks.enemyIdentify"
               value="{{system.specialChecks.enemyIdentify}}" data-dtype="Number" />
      </div>
      <div class="combat-detail flexrow">
        <label>{{localize "ARIANRHOD.CheckItemAppraise"}}</label>
        <input type="number" name="system.specialChecks.itemAppraise"
               value="{{system.specialChecks.itemAppraise}}" data-dtype="Number" />
      </div>
    </div>
  </section>

  {{!-- Currency & Carrying --}}
  <section class="currency-carry-section">
    <div class="currency-section flexrow">
      <label>{{localize "ARIANRHOD.Currency"}}</label>
      <input type="number" name="system.currency"
             value="{{system.currency}}" data-dtype="Number" />
      <span class="currency-unit">{{localize "ARIANRHOD.CurrencyUnit"}}</span>
    </div>
    <div class="carry-section flexrow">
      <label>{{localize "ARIANRHOD.CarryCapacity"}}</label>
      <div class="resource-values">
        <input type="number" name="system.carryCapacity.value"
               value="{{system.carryCapacity.value}}" data-dtype="Number" />
        <span>/</span>
        <input type="number" name="system.carryCapacity.max"
               value="{{system.carryCapacity.max}}" data-dtype="Number" />
      </div>
    </div>
  </section>

</section>
